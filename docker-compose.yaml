version: '3'

services:
  z23_project_tunnel_client:
    build:
      context: /source
      dockerfile: /source/compose/dockerfile
    image: z23_project_tunnel_client
    networks:
      - z23_network
    init: true
    tty: true
    command:
      [
        "python",
        "/app/client/tunnel_client.py",
        "172.21.23.10",
        "12345",
        "172.21.23.9",
        "54321",
        "12345"
      ]
    volumes:
      - /source:/app

    container_name: z23_project_tunnel_client

  z23_project_tunnel_server:
    build:
      context: /source
      dockerfile: /source/compose/dockerfile
    image: z23_project_tunnel_server
    networks:
      - z23_network
    init: true
    tty: true
    command:
      [
        "python",
        "/app/server/tunnel_server.py",
        "172.21.23.9",
        "12345",
        "172.21.23.10",
        "54321",
        "12345",
        "142.250.189.206",
        "80",
        "128"
      ]
    volumes:
      - ./source:/app

    container_name: z23_project_tunnel_server

networks:
  z23_network:
    driver: bridge
